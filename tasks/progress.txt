## Codebase Patterns
- Typecheck errors in dist/lib/pkg/ and node_modules/ are pre-existing issues from protobuf generation and dependencies, not from source code changes
- Component exports are centralized in src/ts/component/index.ts
- Popup components are registered in src/ts/component/popup/index.tsx (both import and Components object)
- When removing a feature, make functions no-ops rather than deleting them to avoid breaking callers
- Settings sidebar items are in src/ts/component/sidebar/page/settings/index.tsx
- Settings page components are registered in src/ts/component/page/main/settings/index.tsx
- Menu components are registered in src/ts/component/menu/index.tsx (both import and Components object)
- Publishing-related commands are in lib/api/command.ts under the PUBLISHING section
- Share button in headers is controlled by showShare variable - set to false to hide
- Invite popups (confirm, qr, request) and share popup are registered in popup/index.tsx Components object
- Space settings invite/qr/copyLink buttons are in getButtons() in settings/space/index.tsx
- Join notification handling is in notification/index.tsx case I.NotificationType.Join
- U.Common.onInviteRequest() and U.Menu.inviteContext() are utility wrappers for invite UI
- PopupSpaceJoinByLink routes to /main/invite/ page - both need to be addressed together

---

## 2026-02-07 - US-006
- What was implemented: Removed space sharing settings pages
- Files changed:
  - src/ts/component/sidebar/page/settings/index.tsx - Removed spaceShare from sidebar menu
  - src/ts/component/page/main/settings/index.tsx - Removed PageSpaceShare import, registration, and from SPACE_PAGES
  - src/ts/component/page/main/settings/space/share.tsx - Stubbed to return null
  - src/ts/lib/action.ts - Made openSpaceShare a no-op
  - src/ts/lib/keyboard.ts - Removed spaceShare from navigation handler
- **Learnings for future iterations:**
  - Space share settings had a keyboard.ts reference for back navigation handling
  - The share.tsx component imports a Members sub-component from share/members.tsx - stubbing share.tsx makes members.tsx unreachable too
  - Action.openSpaceShare is called from other places - making it a no-op is safer than tracking all callers

---

## 2026-02-07 - US-005
- What was implemented: Removed publishing UI, commands, and sidebar item
- Files changed:
  - src/ts/component/sidebar/page/settings/index.tsx - Removed dataPublish from sidebar menu
  - src/ts/component/page/main/settings/index.tsx - Removed PageDataPublish import and registration
  - src/ts/lib/api/command.ts - Removed Publishing* commands (PublishingCreate, PublishingRemove, PublishingList, PublishingResolveUri, PublishingGetStatus)
  - src/ts/component/menu/index.tsx - Removed MenuPublish import and registration
  - src/ts/component/header/main/object.tsx - Disabled share button (showShare = false), made onShare no-op
  - src/ts/component/header/main/history.tsx - Disabled share button (showShare = false), made onShare no-op
  - src/ts/component/editor/page.tsx - Removed 'publish' from menuCheck
  - src/ts/component/menu/publish.tsx - Stubbed to return null
  - src/ts/component/page/main/settings/data/publish.tsx - Stubbed to return null
  - src/ts/component/page/main/settings/data/index.tsx - Removed PublishingList call and unused state
- **Learnings for future iterations:**
  - Publishing involves multiple UI touchpoints: settings sidebar, settings page, object header share button, history header share button, editor menuCheck
  - The share button in headers opens the publish menu - disabling publishing means disabling the share button
  - Stubbing components to return null is cleaner than deleting them when imports still exist elsewhere

---

## 2026-02-07 - US-003
- What was implemented: Completed removal of membership popups and UpsellBanner component
- Files changed:
  - src/ts/component/popup/index.tsx - Removed imports and registrations for PopupMembership, PopupMembershipActivation, PopupMembershipFinalization
  - src/ts/component/index.ts - Removed UpsellBanner import and export
  - src/ts/component/menu/syncStatus.tsx - Removed UpsellBanner import and usage
  - src/ts/component/page/main/settings/space/storage.tsx - Removed UpsellBanner import and usage
  - src/ts/component/page/main/settings/space/share.tsx - Removed UpsellBanner import and usage
  - src/ts/lib/action.ts - Made membershipUpgrade and membershipUpgradeViaEmail no-ops
  - src/ts/component/menu/identity.tsx - Made onClick no-op
  - src/ts/component/menu/syncStatus/info.tsx - Made upgradeMembership case no-op
  - src/ts/component/page/auth/setup.tsx - Simplified cb1 to skip membership finalization check
  - src/ts/component/page/main/membership.tsx - Simplified init to just redirect to dashboard
  - src/ts/component/popup/invite/confirm.tsx - Made onMembership no-op
- **Learnings for future iterations:**
  - The membership popup had 3 variants: main, activation, and finalization - all need to be removed together
  - UpsellBanner was used in syncStatus menu, storage settings, and share settings
  - Action.membershipUpgrade is called from multiple places - making it a no-op is safer than finding all callers
  - Page components can be left in place if they're unreachable from routes/sidebar

---

## 2026-02-08 - US-007
- What was implemented: Removed invite popups, invite page, share popup, and space join notification handling
- Files changed:
  - src/ts/component/popup/index.tsx - Removed imports and registrations for PopupInviteRequest, PopupInviteConfirm, PopupInviteQr, PopupShare, PopupSpaceJoinByLink
  - src/ts/component/popup/invite/confirm.tsx - Stubbed to return null
  - src/ts/component/popup/invite/qr.tsx - Stubbed to return null
  - src/ts/component/popup/invite/request.tsx - Stubbed to return null
  - src/ts/component/popup/share.tsx - Stubbed to return null
  - src/ts/component/popup/space/joinByLink.tsx - Stubbed to return null
  - src/ts/component/page/main/invite.tsx - Stubbed to redirect to dashboard
  - src/ts/component/page/main/object.tsx - Changed invite redirect to go to dashboard instead
  - src/ts/component/notification/index.tsx - Removed Join notification buttons and inviteConfirm popup opening
  - src/ts/component/menu/help.tsx - Removed 'share' menu item and its handler
  - src/ts/component/page/main/settings/space/index.tsx - Made getButtons() return empty array (removed invite/copyLink/qr)
  - src/ts/lib/util/common.ts - Made onInviteRequest a no-op
  - src/ts/lib/util/menu.ts - Made inviteContext a no-op
  - src/ts/store/popup.ts - Removed 'inviteQr' from NO_DIMMER_IDS
- **Learnings for future iterations:**
  - Invite flow has many touchpoints: popup components, page route, notification handler, space settings buttons, help menu, utility functions
  - PopupSpaceJoinByLink navigates to /main/invite/ page - removing the invite page means also stubbing joinByLink
  - page/main/object.tsx has a redirect to invite page when cid/key params present - needs to redirect to dashboard in offline mode
  - The help menu has a 'share' item that opens the share popup (share the Anytype app link) - distinct from space sharing
  - Space settings index has getButtons() that returns invite/copyLink/qr buttons based on cid/key state
- NotificationList/NotificationReply are used for general notifications (import/export/gallery), not just sharing - keep them
- Action.inviteRevoke is a wrapper that calls C.SpaceInviteRevoke - make it a no-op when removing the command
- U.Space.getInvite wraps C.SpaceInviteGetCurrent - make it a no-op when removing the command
- share/members.tsx uses C.SpaceRequestDecline, C.SpaceParticipantRemove, C.SpaceRequestApprove, C.SpaceParticipantPermissionsChange - must be stubbed even though unreachable
- Space create popup auto-shares chat spaces via C.SpaceMakeShareable + C.SpaceInviteGenerate - remove for offline mode

---

## 2026-02-08 - US-008
- What was implemented: Removed all 13 space sharing/invite gRPC commands and their references
- Files changed:
  - src/ts/lib/api/command.ts - Removed SpaceInviteGenerate, SpaceInviteChange, SpaceInviteView, SpaceInviteRevoke, SpaceInviteGetCurrent, SpaceStopSharing, SpaceMakeShareable, SpaceJoin, SpaceJoinCancel, SpaceRequestApprove, SpaceRequestDecline, SpaceParticipantPermissionsChange, SpaceParticipantRemove
  - src/ts/lib/api/response.ts - Removed SpaceInviteGenerate, SpaceInviteGetCurrent, SpaceInviteView response handlers
  - src/ts/lib/action.ts - Made inviteRevoke a no-op
  - src/ts/lib/util/space.ts - Made getInvite a no-op
  - src/ts/component/popup/space/create.tsx - Removed isChatSpace auto-sharing (SpaceMakeShareable + SpaceInviteGenerate)
  - src/ts/component/page/main/settings/space/share/members.tsx - Stubbed to return null
  - src/ts/lib/api/dispatcher.ts - Removed SpaceInviteGetCurrent from SKIP_SENTRY_ERRORS
  - src/json/error.ts - Removed SpaceInviteView and SpaceJoin error codes
- **Learnings for future iterations:**
  - NotificationList and NotificationReply are used for general notifications (import/export/gallery), not just sharing - don't remove them
  - The chat space creation flow auto-shares via SpaceMakeShareable + SpaceInviteGenerate - needs to be removed for offline-only
  - Even unreachable components like share/members.tsx must be stubbed if they reference removed exports, because TypeScript still checks them
  - Response handlers in response.ts must also be removed when commands are removed

---
